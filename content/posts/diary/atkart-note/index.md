---
title: "研究室用の LaTeX クラスを作ったときの話"
date: 2021-08-07
categories: [日記-備忘録,TeX-LaTeX]
tags: [jlreq,expl3]
---

具体的なクラスの作り方はいつかまとめて，Qiita にもあげたいなと思いながら，ちょっと愚痴をこぼす。

# はじめに

僕は高専の専攻科 2 年生（2021 年 8 月時点）です。本科 5 年生のときから研究室所属し，気付いたら 3 年目で，今年で卒業です。

そんな研究室には 10 年以上前から卒論・修論用の LaTeX スタイルファイルが用意されていました。そのファイルは古く，LuaLaTeX 等では動かせないなどの問題がありました。

そうだ，新しいテンプレートを作ろう！

# テンプレートの作り方

テンプレートを作るには，大きく 2 つの方法があります。

1. 既存のクラス（`jsarticle`，`jlreq` など）と自作スタイルファイルで作成
2. 既存のクラスをベースに新しいクラスファイルの作成

自由度が高く勉強にもなる 2 つ目の方法でテンプレートを作成することにしました。

`jlreq` をベースにしました。理由は，新しく，クラスで対応している調整が多いからです。また，pLaTeX，upLaTeX，LuaLaTeX に対応しているからです。

## 作り方は誰から学ぶ？

クラスファイルの作成方法はそこまで情報が無いので主に英語の内容で調査することが多かったです。まあ情報があるのでそこまで困りません。

言語処理学会の年次大会予稿集用 LaTeX クラスの `NLProceedings` が `jlreq` をベースだったので，凄く参考になりました。7 割はこのソースコードから学びました。

## expl3 について

expl3（エクスペル・スリー）とは LaTeX3 チームが開発しているプログラミング言語です。TeX 言語で実装されていて，TeX 上で動作します。TeX のマクロは地獄みたいに辛いですが，**expl3 で**は**快適な TeX 生活**を送れます。詳しくはググれ。

変数とか関数が定義できるので非常に便利です。卒論クラスの作成に伴い，勉強しました。他のプログラミング言語に比べたらなかなかしんどいですが，TeX より幸せなので我慢できました。

# さて，愚痴でもこぼすか

今日，**(u)pLaTeX が使えなくなる**だろうと言われている中，あらゆる学会等で (u)pLaTeX のテンプレートを配布しています。upLaTeX ならともかく，pLaTeX だけの学会も少なくありません。今後のことを考えると，日本語 LaTeX をどうするか，全 LaTeX ユーザは考えなければ行けないのでは無いでしょうか？

今回卒論クラスの作成に当たって，「簡単な体裁の設定をするクラスファイルは作れる。」と感じました。`jlreq` が使える環境（TeX Live 2017 以降？）では問題なく動作します。学会用クラスは新しく作り直す必要があると感じます。僕が出る学会の予稿もゴミみたいなクラスファイルしか用意されていまでした。皆さんが所属する学会のクラスファイルを作ることが，今後の日本を支えると思っています。

そういえば，学内の研究発表用のテンプレは MS Word だけです。しかも，拡張子が `doc` で，`x` がついてないほど古いです。フォントは MS Mincho を強制したりなど，クソがクソするくらいクソ[^kuso]です。卒業までにどうにかしていきたいなと思ってます。

[^kuso]: 詳しく話すと長いので，簡略化してます。

# 今後について

今後は↓のことをやっていきたいです。こんな愚痴をこぼしてないで手を動かさないとですね。

- クラスファイルを作るための方法を具体的にまとめていきたいです。ソースコードを公開できるといいですね。
- 実はクラスファイル以外に，論文の書き方についても簡単に執筆しました。それも公開できるといいなと思ってます。
- 学内の予稿クラスを作成する。MS Word 用も新しくする。
- 僕が出る学会用の予稿クラスも作成できれば，学外での活躍になって嬉しいですね。

# 文献

1. [`jlreq` (GitHub)](https://github.com/abenori/jlreq)
2. [`NLProceedings` (GitHub)](https://github.com/wtsnjp/nlproceedings)
3. [expl3 (CTAN)](https://ctan.org/pkg/expl3)
