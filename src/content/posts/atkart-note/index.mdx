---
title: "研究室用のLaTeXクラスを作ったときの話"
description: "研究室で執筆する卒業・修了論文のLaTeXクラスを作成しました。作成時の流れや気持ちを備忘録にまとめました。"
publishedDate: 2021-08-07
updatedDate: 2024-06-29
tags: [
  {id: "memorandum", name: "備忘録"},
  {id: "tex", name: "TeX"},
  {id: "latex", name: "LaTeX"},
  {id: "jlreq", name: "jlreq"},
  {id: "expl3", name: "expl3"},
]
---
import JwAki from "../../../components/JwAki.astro";

具体的なクラスの作り方はいつかまとめて、Qiitaにもあげたいなと思いながら、ちょっと愚痴をこぼす。

## はじめに

僕は高専の専攻科2年生（2021年8月時点）です。本科5年生のときから研究室所属し、気付いたら3年目で、今年で修了です。

そんな研究室には10年以上前から卒論・修論用のLaTeXスタイルファイルが用意されていました。そのファイルは古く、LuaLaTeX等では動かせないなどの問題がありました。

そうだ、新しいテンプレートを作ろう！

## テンプレートの作り方

テンプレートを作るには、大きく2つの方法があります。

1. 既存のクラス（`jsarticle`、`jlreq`など）と自作スタイルファイルで作成
2. 既存のクラスをベースに新しいクラスファイルの作成

自由度が高く勉強にもなる2つ目の方法でテンプレートを作成することにしました。

`jlreq`をベースにしました。理由は、新しく、クラスで対応している調整が多いからです。また、pLaTeX、upLaTeX、LuaLaTeXに対応しているからです。

### 作り方は誰から学ぶ？

クラスファイルの作成方法はそこまで情報がないので主に英語の内容で調査することが多かったです。まあ情報があるのでそこまで困りません。

言語処理学会の年次大会予稿集用LaTeXクラスの`NLProceedings`が`jlreq`をベースだったので、凄く参考になりました。7割はこのソースコードから学びました。

### expl3について

expl3（エクスペル・スリー）とはLaTeX3チームが開発しているプログラミング言語です。TeX言語で実装されていて、TeX上で動作します。TeXのマクロは地獄みたいに辛いですが、**expl3で**は**快適なTeX生活**を送れます。詳しくはググれ。

変数とか関数が定義できるので非常に便利です。卒論クラスの作成に伴い、勉強しました。他のプログラミング言語に比べたらなかなかしんどいですが、TeXより幸せなので我慢できました。

## さて、愚痴でもこぼすか

今日、**pLaTeX/upLaTeXが使えなくなる**だろうと言われている中、あらゆる学会等でpLaTeX/upLaTeXのテンプレートを配布しています。upLaTeXならともかく、pLaTeXだけの学会も少なくありません。今後のことを考えると、日本語LaTeXをどうするか、全LaTeXユーザは考えなければ行けないのではないでしょうか？

今回卒論クラスの作成に当たって、「簡単な体裁の設定をするクラスファイルは作れる。」と感じました。`jlreq`が使える環境（TeX Live 2017以降？）では問題なく動作します。学会用クラスは新しく作り直す必要があると感じます。僕が出る学会の予稿も無いよりはマシくらいなクラスファイルしか用意されていまでした。皆さんが所属する学会のクラスファイルを作ることが、今後の日本を支えると思っています。

そういえば、学内の研究発表用のテンプレはMS Wordだけです。しかも、拡張子が`doc`で、`x`がついてないほど古いです。フォントはMS Minchoを強制したりなど、クソがクソするくらいクソ[^kuso]です。卒業までにどうにかしていきたいなと思ってます。

[^kuso]: 詳しく話すと長いので、簡略化してます。

## 今後について

今後は↓のことをやっていきたいです。こんな愚痴をこぼしてないで手を動かさないとですね。

- クラスファイルを作るための方法を具体的にまとめていきたいです。ソースコードを公開できるといいですね。
- 実はクラスファイル以外に、論文の書き方についても簡単に執筆しました。それも公開できるといいなと思ってます。
- 学内の予稿クラスを作成する。MS Word用も新しくする。
- 僕が出る学会用の予稿クラスも作成できれば、学外での活躍になって嬉しいですね。

## 文献

1. [jlreq](https://github.com/abenori/jlreq)
2. [NLProceedings](https://github.com/wtsnjp/nlproceedings)
3. [expl3](https://ctan.org/pkg/expl3)
